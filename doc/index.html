<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<HTML>
<HEAD>
<TITLE>The Compcert certified compiler</TITLE>
<META HTTP-EQUIV="Content-Type" CONTENT="text/html; charset=iso-8859-1">

<style type="text/css">
body {
  color: black; background: white;
  margin-left: 5%; margin-right: 5%;
}
h2 { margin-left: -5%;}
h3 { margin-left: -3%; }
h1,h2,h3 { font-family: sans-serif; }
hr { margin-left: -5%; margin-right:-5%; }
a:visited {color : #416DFF; text-decoration : none; font-weight : bold}
a:link {color : #416DFF; text-decoration : none; font-weight : bold}
a:hover {color : Red; text-decoration : underline; }
a:active {color : Red; text-decoration : underline; }
</style>

<LINK type="text/css" rel="stylesheet" href="style.css">
</HEAD>
<BODY>

<H1 align="center">The Compcert certified compiler</H1>
<H2 align="center">Commented Coq development</H2>
<H3 align="center">Version 1.0, 2007-08-28</H3>

<H2>Introduction</H2>

<P>Compcert is a compiler that generates PowerPC assembly
code from Clight, a large subset of the C programming language.
The particularity of this compiler is that it is written mostly within
the specification language of the Coq proof assistant, and its
correctness --- the fact that the generated assembly code is
semantically equivalent to its source program --- was entirely proved
within the Coq proof assistant.</P>

<P>A high-level overview of the Compcert compiler and its proof of 
correctness can be found in the following papers:</P>
<UL>
<LI>Xavier Leroy, <A
HREF="http://gallium.inria.fr/~xleroy/publi/compiler-certif.pdf">Formal
certification of a compiler back-end, or: programming a compiler with
a proof assistant</A>.  Proceedings of the POPL 2006 symposium.
<LI>Sandrine Blazy, Zaynah Dargaye and Xavier Leroy,
<A HREF="http://gallium.inria.fr/~xleroy/publi/cfront.pdf">Formal
verification of a C compiler front-end</A>. 
Proceedings of Formal Methods 2006, LNCS 4085.
</UL>

<P>This Web site gives a commented listing of the underlying Coq
specifications and proofs.  Proof scripts and the parts of the
compiler written directly in Caml are omitted.  This development is a
work in progress; some parts have substantially changed since the
overview papers above were written.</P>

<P>This document and all Coq source files referenced from it are
copyright 2005, 2006, 2007 Institut National de Recherche en Informatique et
en Automatique (INRIA) and distributed under the terms of the <A
HREF="http://www.gnu.org/licenses/gpl.html">GNU General Public
License</A> version 2.</P>

<H2>Table of contents</H2>

<H3>General-purpose libraries, data structures and algorithms</H3>

<UL>
<LI> <A HREF="html/Coqlib.html">Coqlib</A>: addendum to the Coq standard library.
     (Coq source file with proofs:
      <A HREF="Coqlib.v"><code>Coqlib.v</code></a>.)
<LI> <A HREF="html/Maps.html">Maps</A>: finite maps.
     (Coq source file with proofs:
      <A HREF="Maps.v"><code>Maps.v</code></a>.)
<LI> <A HREF="html/Integers.html">Integers</A>: machine integers.
     (Coq source file with proofs:
      <A HREF="Integers.v"><code>Integers.v</code></a>.)
<LI> <A HREF="html/Floats.html">Floats</A>: machine floating-point numbers.
<LI> <A HREF="html/Iteration.html">Iteration</A>: various forms of "while" loops.
<LI> <A HREF="html/Ordered.html">Ordered</A>: construction of
ordered types.
<LI> <A HREF="html/Lattice.html">Lattice</A>: construction of
semi-lattices.
<LI> <A HREF="html/Kildall.html">Kildall</A>: resolution of dataflow
inequations by fixpoint iteration.
<LI> <A HREF="html/Parmov.html">Parmov</A>: compilation of parallel assignments.
</UL>

<H3>Definitions and properties used in many parts of the development</H3>

<UL>
<LI> <A HREF="html/Errors.html">Errors</A>: the Error monad.
<LI> <A HREF="html/AST.html">AST</A>: identifiers, whole programs and other
common elements of abstract syntaxes.
     (Coq source file with proofs: <A HREF="AST.v"><code>AST.v</code></a>.)
<LI> <A HREF="html/Values.html">Values</A>: run-time values.
<LI> <A HREF="html/Events.html">Events</A>: observable events and traces.
<LI> <A HREF="html/Mem.html">Mem</A>: the memory model.
<LI> <A HREF="html/Globalenvs.html">Globalenvs</A>: global execution environments.
<LI> <A HREF="html/Smallstep.html">Smallstep</A>: tools for small-step semantics.
<LI> <A HREF="html/Op.html">Op</A>: operators, addressing modes and their
semantics.
</UL>

<H3>Source, intermediate and target languages: syntax and semantics</H3>

<UL>
<LI> <A HREF="html/Csyntax.html">Clight syntax</A> and its
<A HREF="html/Csem.html">semantics</A>: the source language.
<LI> <A HREF="html/Csharpminor.html">Csharpminor</A>: low-level
 structured language.
<LI> <A HREF="html/Cminor.html">Cminor</A>: low-level structured
language, with explicit stack allocation of certain local variables.
<LI> <A HREF="html/CminorSel.html">CminorSel</A>: like Cminor,
with machine-specific operators and addressing modes.
<LI> <A HREF="html/RTL.html">RTL</A>: register transfer language (3-address
code, control-flow graph, infinitely many pseudo-registers). <BR>
See also: <A HREF="html/Registers.html">Registers</A> (representation of
pseudo-registers).
<LI> <A HREF="html/LTL.html">LTL</A>: location transfer language (3-address
code, control-flow graph, finitely many physical registers, infinitely
many stack slots). <BR>
See also: <A HREF="html/Locations.html">Locations</A> (representation of
locations).
<LI> <A HREF="html/LTL.html">LTLin</A>: like LTL, but the CFG is
replaced by a linear list of instructions with explicit branches and labels.
<LI> <A HREF="html/Linear.html">Linear</A>: like LTLin, with explicit
spilling, reloading and enforcement of calling conventions.
<LI> <A HREF="html/Mach.html">Mach</A>: like Linear, with a more concrete
view of the activation record.  <BR>
See also: <A HREF="html/Machabstr.html">Machabstr</A> abstract semantics for Mach. <BR>
See also: <A HREF="html/Machconcr.html">Machconcr</A> concrete semantics for Mach.
<LI> <A HREF="html/PPC.html">PPC</A>: abstract syntax for PowerPC assembly
code.
</UL>

<H3>Compiler passes</H3>

<TABLE cellpadding="5%">
<TR valign="top">
  <TH>Pass</TH>
  <TH>Source &amp; target</TH>
  <TH>Compiler&nbsp;code</TH>
  <TH>Correctness&nbsp;proof</TH>
</TR>

<TR valign="top">
  <TD>Simplification of control structures; <br>
      explication of type-dependent computations</TD>
  <TD>Clight to Csharpminor</TD>
  <TD><A HREF="html/Cshmgen.html">Cshmgen</A></TD>
  <TD><A HREF="html/Cshmgenproof1.html">Cshmgenproof1</A><br>
      <A HREF="html/Cshmgenproof2.html">Cshmgenproof2</A><br>
      <A HREF="html/Cshmgenproof3.html">Cshmgenproof3</A></TD>
<TR valign="top">
  <TD>Stack allocation of local variables<br>whose address is taken</TD>
  <TD>Csharpminor to Cminor</TD>
  <TD><A HREF="html/Cminorgen.html">Cminorgen</A></TD>
  <TD><A HREF="html/Cminorgenproof.html">Cminorgenproof</A></TD>
</TR>

<TR valign="top">
  <TD>Recognition of operators<br>and addressing modes</TD>
  <TD>Cminor to CminorSel</TD>
  <TD><A HREF="html/Selection.html">Selection</A></TD>
  <TD><A HREF="html/Selectionproof.html">Selectionproof</A></TD>
</TR>

<TR valign="top">
  <TD>Construction of the CFG, <br>3-address code generation</TD>
  <TD>Cminor to RTL</TD>
  <TD><A HREF="html/RTLgen.html">RTLgen</A></TD>
  <TD><A HREF="html/RTLgenspec.html">RTLgenspec</A><BR>
      <A HREF="html/RTLgenproof.html">RTLgenproof</A></TD>
</TR>

<TR valign="top">
  <TD>Constant propagation</TD>
  <TD>RTL to RTL</TD>
  <TD><A HREF="html/Constprop.html">Constprop</A></TD>
  <TD><A HREF="html/Constpropproof.html">Constpropproof</A></TD>
</TR>

<TR valign="top">
  <TD>Common subexpression elimination</TD>
  <TD>RTL to RTL</TD>
  <TD><A HREF="html/CSE.html">CSE</A></TD>
  <TD><A HREF="html/CSEproof.html">CSEproof</A></TD>
</TR>

<TR valign="top">
  <TD>Register allocation by coloring<br>of an interference graph</TD>
  <TD>RTL to LTL</TD>
  <TD><A HREF="html/InterfGraph.html">InterfGraph</A><BR>
      <A HREF="html/Coloring.html">Coloring</A><BR>
      <A HREF="html/Allocation.html">Allocation</A></TD>
  <TD><BR>
      <A HREF="html/Coloringproof.html">Coloringproof</A><BR>
      <A HREF="html/Allocproof.html">Allocproof</A></TD>
</TR>

<TR valign="top">
  <TD>Branch tunneling</TD>
  <TD>LTL to LTL</TD>
  <TD><A HREF="html/Tunneling.html">Tunneling</A></TD>
  <TD><A HREF="html/Tunnelingproof.html">Tunnelingproof</A></TD>
</TR>

<TR valign="top">
  <TD>Linearization of the CFG</TD>
  <TD>LTL to LTLin</TD>
  <TD><A HREF="html/Linearize.html">Linearize</A></TD>
  <TD><A HREF="html/Linearizeproof.html">Linearizeproof</A></TD>
</TR>

<TR valign="top">
  <TD>Spilling, reloading, calling conventions</TD>
  <TD>LTLin to Linear</TD>
  <TD><A HREF="html/Conventions.html">Conventions</A><BR>
      <A HREF="html/Reload.html">Reload</A></TD>
  <TD><A HREF="html/Parallelmove.html">Parallelmove</A><BR>
      <A HREF="html/Reloadproof.html">Reloadproof</A></TD>
</TR>

<TR valign="top">
  <TD>Laying out the activation records</TD>
  <TD>Linear to Mach</TD>
  <TD><A HREF="html/Bounds.html">Bounds</A><BR>
      <A HREF="html/Stacking.html">Stacking</A></TD>
  <TD><A HREF="html/Stackingproof.html">Stackingproof</A></TD>
</TR>

<TR valign="top">
  <TD>Storing the activation records in memory</TD>
  <TD>Mach to Mach</TD>
  <TD>(none)
  <TD><A HREF="html/PPCgenretaddr.html">PPCgenretaddr</A><BR>
      <A HREF="html/Machabstr2mach.html">Machabstr2mach</A></TD>

<TR valign="top">
  <TD>Emission of PowerPC assembly</TD>
  <TD>Mach to PPC</TD>
  <TD><A HREF="html/PPCgen.html">PPCgen</A></TD>
  <TD><A HREF="html/PPCgenproof1.html">PPCgenproof1</A><BR>
      <A HREF="html/PPCgenproof.html">PPCgenproof</A></TD>
</TR>
</TABLE>

<H3>Type systems</H3>

Trivial type systems are used to statically capture well-formedness
conditions on the source and intermediate languages.
<UL>
<LI> <A HREF="html/Ctyping.html">Ctyping</A>: partial typing for Clight + type-checking
<LI> <A HREF="html/RTLtyping.html">RTLtyping</A>: typing for RTL + type
reconstruction.
<LI> <A HREF="html/LTLtyping.html">LTLtyping</A>: typing for LTL.
<LI> <A HREF="html/LTLintyping.html">LTLintyping</A>: typing for LTLin.
<LI> <A HREF="html/Lineartyping.html">Lineartyping</A>: typing for Linear.
<LI> <A HREF="html/Machtyping.html">Machtyping</A>: typing for Mach.
</UL>
Proofs that compiler passes are type-preserving:
<UL>
<LI> <A HREF="html/Alloctyping.html">Alloctyping</A> (register allocation).
<LI> <A HREF="html/Tunnelingtyping.html">Tunnelingtyping</A> (branch tunneling).
<LI> <A HREF="html/Linearizetyping.html">Linearizetyping</A> (code linearization).
<LI> <A HREF="html/Reloadtyping.html">Reloadtyping</A> (spilling and reloading).
<LI> <A HREF="html/Stackingtyping.html">Stackingtyping</A> (layout of activation records).
</UL>

<H3>All together</H3>

<UL>
<LI> <A HREF="html/Main.html">Main</A>: composing the passes together; the
final semantic preservation theorems.
<LI> <A HREF="html/Complements.html">Complements</A>: interesting consequences of the semantic preservation theorems.
</UL>

<HR>
<ADDRESS>Xavier.Leroy@inria.fr</ADDRESS>
<HR>

</BODY>
</HTML>
